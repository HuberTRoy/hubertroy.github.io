webpackJsonp([2],{"08u1":function(t,e){},"Df4+":function(t,e){},Ftew:function(t,e){},JnpG:function(t,e){},MpPw:function(t,e,n){"use strict";var s=n("lC5x"),i=n.n(s),a=n("J0Oq"),r=n.n(a),o=n("4YfN"),u=n.n(o),_=n("a3Yh"),l=n.n(_),c=n("nfw7"),d=n.n(c),p=n("2bvH"),v=(n("gBzA"),n("Muz9")),f=n.n(v),h=n("Dod7"),m={get_upload_name:function(t){var e=t.user_id,n=t.folder?t.folder:"courses",s=new Date;return n+"/uid"+e+"-"+(""+s.getFullYear()+(s.getMonth()+1)+s.getDate())+"-"+s.getTime()},get_upload_key:function(t){return f.a.post(h.a+"v2/services/qiniu/token/",t)},get_upload_domain:function(t){return f.a.get(h.c+"v2/query",{params:t})},upload:function(t){return f.a.post(""+h.d,t,{"content-type":"application/x-www-form-urlencoded"})},upload_file:function(t){var e=this;return r()(i.a.mark(function n(){var s,a,r,o,u;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=e.get_upload_name({user_id:t.user_id,folder:t.folder}),n.next=3,e.get_upload_key({bucket:"simplecloud",key:s});case 3:return a=n.sent,n.next=6,e.get_upload_domain({ak:a.data.token.split(":")[0],bucket:"simplecloud"});case 6:return n.sent.data.up.acc.main[0],(r=new FormData).append("file",t.file),r.append("token",a.data.token),r.append("key",s),r.append("fname","old.jpg"),n.next=15,e.upload(r);case 15:return o=n.sent,u=""+h.b+o.data.key,n.abrupt("return",u);case 18:case"end":return n.stop()}},n,e)}))()}},q={props:{placeholder:{type:String,require:!1},preview:{type:Boolean,require:!1,default:!1},hidden_default_tools:l()({type:Boolean,require:!1},"require",!0)},data:function(){return{text:"",selected_text:""}},components:{VueMarkdown:d.a},computed:u()({},Object(p.d)({user_id:function(t){return t.loginState.user_info.id}})),methods:{tab_preview:function(){this.preview=!this.preview},selected:function(){var t=document.getElementById("markdown_textarea"),e=t.value.substr(t.selectionStart,t.selectionEnd-t.selectionStart);return this.selected_text=e,{left:t.value.substr(0,t.selectionStart),right:t.value.substr(t.selectionEnd,t.value.length),selected:e}},replace:function(t){var e=this.selected(),n=""+t+e.selected+t;this.text=""+e.left+n+e.right},start_with:function(t){var e=this.selected(),n=""+t+e.selected;this.text=""+e.left+n+e.right},link_with:function(){var t=this.selected(),e="";e="http"==t.selected.substr(0,4)?"[描述]("+t.selected+")":""==t.selected?"[描述](链接)":"["+t.selected+"](链接)",this.text=""+t.left+e+t.right},img_with:function(t){var e=this.selected(),n="![picture]("+t+")";this.text=""+e.left+n+e.right},upload:function(){var t=r()(i.a.mark(function t(e){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.upload_file({file:e.target.files[0],user_id:this.user_id,folder:"questions"});case 2:n=t.sent,this.img_with(n);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},watch:{text:function(){this.$emit("text",this.text)}}},w={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"markdown_editor"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.preview,expression:"!preview"}],staticClass:"markdown_container"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.preview,expression:"!preview"}],staticClass:"markdown_container_editor"},[n("div",{staticClass:"markdown_tools"},[n("div",{staticClass:"tools"},[n("i",{staticClass:"fa fa-bold",on:{click:function(e){return t.replace("**")}}}),t._v(" "),n("i",{staticClass:"fa fa-italic",on:{click:function(e){return t.replace("*")}}}),t._v(" "),n("i",{staticClass:"fa fa-link",on:{click:function(e){return t.link_with()}}}),t._v(" "),n("i",{staticClass:"fa fa-quote-left",on:{click:function(e){return t.start_with("> ")}}}),t._v(" "),n("i",{staticClass:"fa fa-code",on:{click:function(e){return t.replace("```")}}}),t._v(" "),n("label",{attrs:{for:"upload_file"}},[n("i",{staticClass:"fa fa-image",on:{click:function(e){return t.upload()}}})]),t._v(" "),n("input",{attrs:{type:"file",id:"upload_file"},on:{change:function(e){return t.upload(e)}}}),t._v(" "),n("i",{staticClass:"fa fa-list-ol",on:{click:function(e){return t.start_with("1. ")}}}),t._v(" "),n("i",{staticClass:"fa fa-list-ul",on:{click:function(e){return t.start_with("- ")}}})]),t._v(" "),n("router-link",{staticClass:"get_markdown_knowledge",attrs:{tag:"a",to:{name:"question",params:{id:"764"}}}},[n("i",{staticClass:"fa fa-question-circle"}),t._v("\n                    MarkDown 语法\n                ")])],1),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"markdown_text",attrs:{id:"markdown_textarea",placeholder:t.placeholder},domProps:{value:t.text},on:{select:function(e){return t.selected()},input:function(e){e.target.composing||(t.text=e.target.value)}}})])]),t._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:t.preview,expression:"preview"}],staticClass:"markdown_container_previewer"},[n("VueMarkdown",{attrs:{source:t.text}})],1),t._v(" "),t.hidden_default_tools?n("div",{staticClass:"markdown_operation"},[n("div",[n("button",{directives:[{name:"show",rawName:"v-show",value:!t.preview,expression:"!preview"}],staticClass:"markdown_operation_button markdown_operation_preview_button",on:{click:function(e){return t.tab_preview()}}},[t._v("预览")]),t._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:t.preview,expression:"preview"}],staticClass:"markdown_operation_button markdown_operation_preview_button",on:{click:function(e){return t.tab_preview()}}},[t._v("取消预览")]),t._v(" "),n("button",{staticClass:"markdown_operation_button markdown_operation_public_button"},[t._v("发布")])])]):t._e()])},staticRenderFns:[]};var g=n("C7Lr")(q,w,!1,function(t){n("O9mW")},null,null);e.a=g.exports},O9mW:function(t,e){},OtGh:function(t,e){},SZem:function(t,e){},UtRD:function(t,e){},VIFt:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("4YfN"),i=n.n(s),a=n("2bvH"),r={data:function(){return{tag_type:{discussion:"交流讨论",course:"课程问答",sharing:"技术分享",notice:"站内公告"}}},computed:i()({},Object(a.d)({question_title:function(t){return t.question.question_information.title},question_tag:function(t){return t.question.question_information.type}}))},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"question_title"},[n("router-link",{staticClass:"nav_title_a",attrs:{tag:"a",to:"/questions"}},[t._v("\n        讨论区\n    ")]),t._v(" "),n("span",{staticClass:"separator_span"}),t._v(" "),n("div",{staticClass:"quesiton_tag_div"},[n("router-link",{staticClass:"nav_title_a",attrs:{tag:"a",to:{name:"questions",query:{type:t.question_tag}}}},[t._v("\n            "+t._s(t.tag_type[t.question_tag])+"\n        ")])],1),t._v(" "),n("span",{staticClass:"separator_span"}),t._v(" "),n("router-link",{staticClass:"nav_title_a question_title_a",attrs:{tag:"a",to:{name:"question",params:{id:this.$route.params.id}}}},[t._v("\n         "+t._s(t.question_title)+"\n    ")])],1)},staticRenderFns:[]};var u=n("C7Lr")(r,o,!1,function(t){n("JnpG")},null,null).exports,_=n("nfw7"),l=n.n(_),c={components:{VueMarkDown:l.a},props:{data:{type:Object,require:!0}},methods:i()({},Object(a.b)({change_text_placeholder:"question/change_text_placeholder",change_reply_id:"question/change_reply_id"}),{reply:function(){document.getElementsByClassName("editor")[0].scrollIntoView(!0),this.change_text_placeholder("回复: "+this.data.author.name),this.change_reply_id(this.data.id)}})},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"question_reply_item"},[t.data.author?n("div",{staticClass:"question_reply_item_base_info"},[n("div",{staticClass:"question_reply_item_base_info_layout"},[n("img",{staticClass:"avatar",attrs:{src:t.data.author.avatar_url}}),t._v(" "),n("a",{staticClass:"author",attrs:{href:"javascript:;"}},[t._v(t._s(t.data.author.name)+"\n                    "),n("span",{staticClass:"level"},[t._v("L"+t._s(t.data.author.level))])]),t._v(" "),t.data.parent?n("div",[t._v("\n                    回复\n                    "),n("a",{staticClass:"author",attrs:{href:"javascript:;"}},[t._v(t._s(t.data.parent.author.name)+"\n                        "),n("span",{staticClass:"level"},[t._v("L"+t._s(t.data.parent.author.level))])])]):t._e()]),t._v(" "),n("span",{staticClass:"thumb"},[t._m(0),t._v("\n                | "+t._s(t.data.likes_count)+"\n            ")])]):t._e(),t._v(" "),n("div",{staticClass:"main_reply"},[n("p",{staticClass:"content_p"},[n("VueMarkDown",{attrs:{source:t.data.content}})],1),t._v(" "),n("div",{staticClass:"reply_base_info_div"},[n("span",{staticClass:"question_reply_item_created_time"},[t._v(t._s(t.data.updated_at))]),t._v(" "),n("div",{staticClass:"up_reply_button"},[n("a",{staticClass:"reply_button",attrs:{href:"javascript:;"},on:{click:function(e){return t.reply()}}},[t._v("回复")])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"thumb_button",attrs:{href:"javascript:;"}},[e("i",{staticClass:"far fa-thumbs-up"})])}]};var p=n("C7Lr")(c,d,!1,function(t){n("mVeE")},null,null).exports,v={components:{MarkdownEditor:n("MpPw").a},data:function(){return{content:"",preview:!1}},computed:i()({},Object(a.d)({login:function(t){return t.loginState.sign_on},login_info:function(t){return t.loginState.user_info},placeholder:function(t){return t.question.text_placeholder},reply_id:function(t){return t.question.reply_id}})),methods:i()({},Object(a.b)({reply:"question/reply_question",reply_comment:"question/reply_question_comment",change_text_placeholder:"question/change_text_placeholder",change_reply_id:"question/change_reply_id"}),{tab_preview:function(){this.preview=!this.preview},get_content:function(t){this.content=t},show_login:function(){this.$store.dispatch("loginState/change_show_state","on")},_reply:function(){this.reply_id?this.reply_comment({id:this.$route.params.id,content:this.content,parent_id:this.reply_id}):this.reply({id:this.$route.params.id,content:this.content})},_cancel:function(){this.change_text_placeholder(""),this.change_reply_id(0)}})},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"reply_form"},[t.login?n("div",{staticClass:"editor_div"},[n("div",{staticClass:"editor_header"},[t._v("\n            你的回复\n        ")]),t._v(" "),n("MarkdownEditor",{staticClass:"editor",attrs:{placeholder:t.placeholder,preview:t.preview},on:{text:t.get_content}}),t._v(" "),n("div",{staticClass:"editor_footer"},[n("div",{staticClass:"user_info"},[n("img",{staticClass:"avatar",attrs:{src:t.login_info.avatar_url}}),t._v(" "),n("span",{staticClass:"nickname"},[t._v(t._s(t.login_info.name))])]),t._v(" "),n("div",[n("button",{directives:[{name:"show",rawName:"v-show",value:this.reply_id,expression:"this.reply_id"}],staticClass:"post_answer_button cancel_answer_button",on:{click:function(e){return t._cancel()}}},[t._v("清除回复")]),t._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:!t.preview,expression:"!preview"}],staticClass:"post_answer_button post_preview_button",on:{click:function(e){return t.tab_preview()}}},[t._v("\n                    预览\n                ")]),t._v(" "),n("button",{directives:[{name:"show",rawName:"v-show",value:t.preview,expression:"preview"}],staticClass:"post_answer_button post_preview_button",on:{click:function(e){return t.tab_preview()}}},[t._v("\n                    取消预览\n                ")]),t._v(" "),n("button",{staticClass:"post_answer_button",on:{click:function(e){return t._reply()}}},[t._v("提交")])])])],1):t._e(),t._v(" "),!1===t.login?n("div",{staticClass:"unlogin_div"},[n("a",{staticClass:"login_button",attrs:{href:"javascript:;"},on:{click:t.show_login}},[t._v("\n            登陆\n        ")]),t._v("\n        后回复帖子\n    ")]):t._e()])},staticRenderFns:[]};var h=n("C7Lr")(v,f,!1,function(t){n("OtGh")},null,null).exports,m={computed:i()({},Object(a.d)({prev:function(t){var e=t.question.question_reply_information.previous;return e?(e=e.substr(1).split("=")[1],e=decodeURIComponent(e)):""},next:function(t){var e=t.question.question_reply_information.next;return e?(e=e.substr(1).split("=")[1],e=decodeURIComponent(e),console.log(e,333),e):""}})),methods:i()({},Object(a.b)({change_cursor:"question/change_cursor",get_reply:"question/change_question_reply_information"}),{tab_page:function(t){this.change_cursor(t),this.get_reply()}})},q={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"question_reply_tab_page_div"},[n("button",{staticClass:"question_reply_tab_page_button question_reply_tab_page_button_prev",on:{click:function(e){return t.tab_page(t.prev)}}},[t._v("«上一页")]),t._v(" "),n("button",{staticClass:"question_reply_tab_page_button question_reply_tab_page_button_next",on:{click:function(e){return t.tab_page(t.next)}}},[t._v("下一页»")])])},staticRenderFns:[]};var w={components:{ReplyItem:p,ReplyForm:h,TabPage:n("C7Lr")(m,q,!1,function(t){n("SZem")},null,null).exports},computed:i()({},Object(a.d)({question_reply:function(t){return t.question.question_reply_information}}))},g={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"question_reply"},[e("div",{staticClass:"question_reply_header"},[this._v("\n        全部回复\n    ")]),this._v(" "),e("div",{staticClass:"question_reply_items"},this._l(this.question_reply.results,function(t,n){return e("ReplyItem",{key:n,attrs:{data:t}})}),1),this._v(" "),e("TabPage"),this._v(" "),e("ReplyForm")],1)},staticRenderFns:[]};var C=n("C7Lr")(w,g,!1,function(t){n("Df4+")},null,null).exports,b={components:{VueMarkdown:l.a,QuestionReply:C},data:function(){return{tag_type:{discussion:"交流讨论",course:"课程问答",sharing:"技术分享",notice:"站内公告"}}},computed:i()({},Object(a.d)({question_info:function(t){return t.question.question_information}}))},y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"question_content"},[n("div",{staticClass:"question_content_header"},[n("div",[n("span",{staticClass:"content_question_title"},[t._v(t._s(t.question_info.title))])]),t._v(" "),n("div",[n("span",{staticClass:"question_number"},[t._v(t._s(t.question_info.views)+"查看")]),t._v(" "),n("span",{staticClass:"question_number"},[t._v(t._s(t.question_info.answers_count)+"回复")]),t._v(" "),n("a",{staticClass:"favourite_button",attrs:{href:"javascript:;"}},[t._v("收藏")])])]),t._v(" "),t.question_info.author?n("div",{staticClass:"question_content_information"},[n("img",{staticClass:"question_content_info avatar",attrs:{src:t.question_info.author.avatar_url}}),t._v(" "),n("span",{staticClass:"question_content_info question_author_name"},[t._v(t._s(t.question_info.author.name))]),t._v(" "),n("span",{staticClass:"question_content_info level"},[t._v("L"+t._s(t.question_info.author.level))]),t._v(" "),n("span",{staticClass:"question_content_info created_time"},[t._v(t._s(t.question_info.created_at))]),t._v(" "),n("router-link",{staticClass:"question_content_info",attrs:{tag:"a",to:{name:"questions",query:{type:t.question_info.type}}}},[t._v(t._s(t.tag_type[t.question_info.type]))])],1):t._e(),t._v(" "),t.question_info.content?n("div",{staticClass:"_question_content"},[n("VueMarkdown",{attrs:{source:t.question_info.content}})],1):t._e(),t._v(" "),n("QuestionReply")],1)},staticRenderFns:[]};var k={components:{NavBar:u,QuestionContent:n("C7Lr")(b,y,!1,function(t){n("uLfw")},null,null).exports}},x={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"main_question"},[e("NavBar",{staticClass:"nav_bar"}),this._v(" "),e("QuestionContent")],1)},staticRenderFns:[]};var R=n("C7Lr")(k,x,!1,function(t){n("UtRD")},null,null).exports,j=n("nffx"),E={computed:i()({},Object(a.d)({related_question:function(t){return t.question.related_question_information}}))},$={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"related_question"},[t._m(0),t._v(" "),n("ul",{staticClass:"related_question_ul"},t._l(t.related_question,function(e,s){return n("li",{key:s,staticClass:"related_question_li"},[n("router-link",{staticClass:"related_question_a",attrs:{tag:"a",to:{name:"question",params:{id:e.id}}}},[n("span",[t._v(t._s(e.title))])])],1)}),0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("ul",{staticClass:"related_question_nav_ul"},[e("li",{staticClass:"related_question_nav_li"},[e("a",{staticClass:"related_question_nav_a"},[this._v("\n                相关帖子\n            ")])])])}]};var F=n("C7Lr")(E,$,!1,function(t){n("08u1")},null,null).exports,L={components:{Card:j.a,RelatedQuestion:F}},M={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"side_items"},[e("div",{staticClass:"operation_div"},[e("router-link",{staticClass:"operation_button post_button",attrs:{tag:"a",to:{name:"publish"}}},[this._v("\n                 我要发帖\n        ")])],1),this._v(" "),e("Card",{staticClass:"ad_card",attrs:{data:{img_url:"https://static.shiyanlou.com/img/banner-vip.png"}}}),this._v(" "),e("RelatedQuestion")],1)},staticRenderFns:[]};var O={components:{MainQuestion:R,Side:n("C7Lr")(L,M,!1,function(t){n("Ftew")},null,null).exports},methods:i()({},Object(a.b)({set_question_id:"question/change_question_id",get_question_information:"question/change_question_information",get_related_question:"question/change_related_question_information",get_reply:"question/change_question_reply_information"})),watch:{$route:function(){this.set_question_id(this.$route.params.id),this.get_question_information(),this.get_related_question(),this.get_reply()}},created:function(){this.set_question_id(this.$route.params.id),this.get_question_information(),this.get_related_question(),this.get_reply()}},N={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"question"},[e("MainQuestion",{staticClass:"main_question"}),this._v(" "),e("Side",{staticClass:"side_items"})],1)},staticRenderFns:[]};var V={components:{Question:n("C7Lr")(O,N,!1,function(t){n("gVzV")},null,null).exports}},S={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"question_home_div"},[e("Question")],1)},staticRenderFns:[]};var D=n("C7Lr")(V,S,!1,function(t){n("tAil")},null,null);e.default=D.exports},a3Yh:function(t,e,n){"use strict";e.__esModule=!0;var s,i=n("liLe"),a=(s=i)&&s.__esModule?s:{default:s};e.default=function(t,e,n){return e in t?(0,a.default)(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},gVzV:function(t,e){},lbsL:function(t,e,n){n("ngi5");var s=n("Rv9F").Object;t.exports=function(t,e,n){return s.defineProperty(t,e,n)}},liLe:function(t,e,n){t.exports={default:n("lbsL"),__esModule:!0}},mVeE:function(t,e){},ngi5:function(t,e,n){var s=n("8leu");s(s.S+s.F*!n("berT"),"Object",{defineProperty:n("Mr+r").f})},tAil:function(t,e){},uLfw:function(t,e){}});
//# sourceMappingURL=2.6821caf6e5f9f6da2ef4.js.map